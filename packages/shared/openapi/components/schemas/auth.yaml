# Authentication schemas for mdplane API
# Uses BetterAuth with GitHub/Google OAuth providers

# -----------------------------------------------------------------------------
# User & Session
# -----------------------------------------------------------------------------
User:
  type: object
  description: User information
  required: [id, email]
  properties:
    id:
      type: string
      description: User ID
    email:
      type: string
      format: email
      description: User email address
    createdAt:
      type: string
      format: date-time
      description: Account creation timestamp

Workspace:
  type: object
  description: Workspace summary for user
  required: [id, name]
  properties:
    id:
      type: string
      description: Workspace ID
    name:
      type: string
      description: Workspace name

MeResponse:
  type: object
  description: Current authenticated user information
  required: [ok, data]
  properties:
    ok:
      type: boolean
      const: true
    data:
      type: object
      required: [id, email, workspaces]
      properties:
        id:
          type: string
          description: User ID
        email:
          type: string
          format: email
          description: User email address
        name:
          type: string
          description: User display name (from OAuth provider)
        image:
          type: string
          format: uri
          description: User avatar URL (from OAuth provider)
        workspaces:
          type: array
          items:
            $ref: '#/Workspace'
          description: Workspaces the user has access to
        createdAt:
          type: string
          format: date-time
          description: Account creation timestamp
        webUrl:
          type: string
          format: uri
          description: URL to access the user's control panel

# -----------------------------------------------------------------------------
# Logout
# -----------------------------------------------------------------------------
LogoutResponse:
  type: object
  required: [ok, data]
  properties:
    ok:
      type: boolean
      const: true
    data:
      type: object
      properties:
        status:
          type: string
          const: "logged_out"

