# =============================================================================
# mdplane Server Environment Variables
# Copy this file to apps/server/.env for local development.
# =============================================================================

# -----------------------------------------------------------------------------
# Core runtime
# -----------------------------------------------------------------------------

PORT=3001
HOST=0.0.0.0
NODE_ENV=development
DATABASE_URL=./data/mdplane.sqlite

# Public origins used in generated links and capability URLs.
BASE_URL=http://127.0.0.1:3001
APP_URL=http://127.0.0.1:3000

# Better Auth API origin (must point to the server host).
BETTER_AUTH_URL=http://127.0.0.1:3001

# Required in production:
# BASE_URL=
# APP_URL=
# WS_URL=
# BETTER_AUTH_URL=
# BETTER_AUTH_SECRET=
# MP_JWT_SECRET=
# OPENAPI_SPEC_PATH=/app/openapi.bundled.yaml

# -----------------------------------------------------------------------------
# Optional OAuth providers (enable login/claim via OAuth)
# -----------------------------------------------------------------------------

# GITHUB_CLIENT_ID=
# GITHUB_CLIENT_SECRET=
# GOOGLE_CLIENT_ID=
# GOOGLE_CLIENT_SECRET=

# -----------------------------------------------------------------------------
# Optional operator and runtime controls
# -----------------------------------------------------------------------------

# Secret for /api/v1/admin/metrics (Bearer token).
# ADMIN_SECRET=

# Enable/disable OAuth-governed control-plane features.
MDPLANE_GOVERNED_MODE=false

# DISABLE_BACKGROUND_JOBS=false
# ALLOW_HTTP_WEBHOOKS=false
# Trust proxy-provided IP headers (X-Real-IP / X-Forwarded-For) in addition to CF-Connecting-IP.
# Enable only when your ingress proxy strips and rewrites these headers.
# TRUST_PROXY_HEADERS=false
# Optional shared secret required on proxy-forwarded requests before trusting client IP headers.
# Recommended for platforms where origin IP allowlisting is not available.
# TRUSTED_PROXY_SHARED_SECRET=
# TRUSTED_PROXY_SHARED_SECRET_HEADER=x-mdplane-proxy-secret
# Trust a single-value X-Forwarded-For header as client IP.
# Keep disabled unless your proxy always overwrites this header.
# TRUST_SINGLE_X_FORWARDED_FOR=false
# Require trusted client IP on anonymous sensitive endpoints (/bootstrap, /capabilities/check).
# Defaults to true in production.
# REQUIRE_TRUSTED_CLIENT_IP_FOR_ANON_RATE_LIMITS=true
# MP_DEBUG_WS=false

# -----------------------------------------------------------------------------
# Optional request rate limit overrides
# Units:
# - *_LIMIT: requests per window
# - *_WINDOW_MS: window size in milliseconds
# -----------------------------------------------------------------------------

# RATE_LIMIT_BOOTSTRAP_LIMIT=10
# RATE_LIMIT_BOOTSTRAP_WINDOW_MS=3600000
# RATE_LIMIT_READ_LIMIT=1000
# RATE_LIMIT_READ_WINDOW_MS=60000
# RATE_LIMIT_WRITE_LIMIT=100
# RATE_LIMIT_WRITE_WINDOW_MS=60000
# RATE_LIMIT_APPEND_LIMIT=400
# RATE_LIMIT_APPEND_WINDOW_MS=60000
# RATE_LIMIT_SEARCH_LIMIT=60
# RATE_LIMIT_SEARCH_WINDOW_MS=60000
# RATE_LIMIT_SUBSCRIBE_LIMIT=10
# RATE_LIMIT_SUBSCRIBE_WINDOW_MS=60000
# RATE_LIMIT_BULK_LIMIT=30
# RATE_LIMIT_BULK_WINDOW_MS=60000
# RATE_LIMIT_WEBHOOK_CREATE_LIMIT=20
# RATE_LIMIT_WEBHOOK_CREATE_WINDOW_MS=3600000
# RATE_LIMIT_CAPABILITY_CHECK_LIMIT=5
# RATE_LIMIT_CAPABILITY_CHECK_WINDOW_MS=60000

# -----------------------------------------------------------------------------
# Optional storage/size limits
# -----------------------------------------------------------------------------

# MAX_WORKSPACE_STORAGE_BYTES=104857600
# MAX_FILE_SIZE_BYTES=10485760
# MAX_VOLUME_SIZE_BYTES=5368709120
