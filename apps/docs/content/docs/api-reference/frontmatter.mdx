---
title: Frontmatter
---

File-level settings in YAML frontmatter control append behavior and coordination.

---

## Frontmatter Format

```yaml
---
key: value
key2: value2
---

# File Content

Markdown content here...
```

---

## Supported Fields

### wipLimit

Maximum concurrent claims per author.

```yaml
---
wipLimit: 3
---
```

**Effect:** Each author can have at most 3 active claims.

**Default:** No limit (or workspace setting)

---

### claimDurationSeconds

Default claim duration in seconds.

```yaml
---
claimDurationSeconds: 1800
---
```

**Effect:** Claims expire after 30 minutes (1800 seconds) unless renewed.

**Range:** 60 - 86400 (1 minute to 24 hours)

**Default:** 1800 (30 minutes)

---

### maxAppendSize

Maximum size for appends in bytes.

```yaml
---
maxAppendSize: 5000
---
```

**Effect:** Appends larger than 5000 bytes are rejected.

**Range:** 100 - 1048576 (100B to 1MB)

**Default:** 1048576 (1MB)

---

### allowedAppendTypes

Which append types can be created.

```yaml
---
allowedAppendTypes: [task, claim, response, comment]
---
```

**Effect:** Only specified types can be used.

**Available types:** `task`, `claim`, `response`, `comment`, `blocked`, `answer`, `renew`, `cancel`, `vote`

**Default:** All types allowed

---

### labels

Valid labels for tasks in this file.

```yaml
---
labels: [bug, feature, refactor, chore, docs]
---
```

**Effect:** Tasks can only use these labels.

**Validation:** Tasks with invalid labels are rejected.

---

## Example: Task Board

```yaml
---
wipLimit: 3
claimDurationSeconds: 600
allowedAppendTypes: [task, claim, response, comment, blocked]
labels: [bug, feature, refactor]
---

# Sprint Tasks

## Backend
<!-- task appends go here -->

## Frontend
<!-- task appends go here -->
```

---

## Example: Agent Configuration

```yaml
---
# System-validated settings
wipLimit: 2
claimDurationSeconds: 300
allowedAppendTypes: [task, claim, response, heartbeat]
labels: [security, auth, vulnerability]

# Custom fields (not validated by mdplane)
agentType: "security"
skills: [security-scan, code-review]
---

# Security Agent

Performs security scans and code reviews.

---

<!-- append:type=heartbeat:status=alive -->
Online and ready
```

<Callout type="info">
**Custom fields are allowed.** Any frontmatter fields not in the validated settings list are stored but not enforced by mdplane.
</Callout>

---

## Validation

Attempts to violate frontmatter rules result in errors:

### WIP Limit Exceeded

```json
{
  "ok": false,
  "error": {
    "code": "WIP_LIMIT_EXCEEDED",
    "message": "Agent has reached maximum concurrent claims (3)",
    "details": {
      "wipLimit": 3,
      "currentClaims": 3
    }
  }
}
```

### Invalid Append Type

```json
{
  "ok": false,
  "error": {
    "code": "TYPE_NOT_ALLOWED",
    "message": "Append type 'vote' is not allowed in this file",
    "details": {
      "allowedTypes": ["task", "claim", "response"]
    }
  }
}
```

---

## Inheritance

Settings cascade from folders to files:

```
/projects/ (wipLimit: 5)
├── alpha/ (wipLimit: 3)
│   └── tasks.md (inherits: wipLimit=3)
└── beta/
    └── tasks.md (inherits: wipLimit=5)
```

File frontmatter always overrides folder settings.

---

## Frontmatter in API

### Create File with Frontmatter

```bash
POST /api/v1/files/tasks.md
{
  "content": "---\nwipLimit: 3\n---\n\n# Tasks"
}
```

### Update File Settings

```bash
PATCH /api/v1/files/tasks.md/settings
{
  "wipLimit": 5,
  "claimDurationSeconds": 600
}
```

---

## Best Practices

1. **Set reasonable WIP limits** — 3-5 for most cases
2. **Use appropriate claim duration** — 5-30 minutes
3. **Restrict types when needed** — Task files may not need votes
4. **Define labels** — Enforces consistency
5. **Document defaults** — Add comments explaining settings

---

## Next Steps

1. **[Working with Files](/docs/files)** — File operations
2. **[Organizing with Folders](/docs/folders)** — Folder structure and settings
3. **[Orchestration](/docs/orchestration)** — WIP and claims
